{% extends 'base.html' %} {% load role_tags %} {% block title %}{{ page_title }}{% endblock %} {% block content %} <div class="container-fluid"> <!-- Page Header with Context Switching --> <div class="row mb-4"> <div class="col-12"> <div class="card" style="background: var(--royal-blue-gradient); color: white;"> <div class="card-body"> <div class="row align-items-center"> <div class="col-md-8"> <h1 class="mb-1 fw-bold">{{ page_title }}</h1> <p class="mb-0 opacity-75"> Manage lecturers across your available roles </p> </div> <div class="col-md-4 text-center"> <div style="background: rgba(255,255,255,0.2); padding: 12px 16px; border-radius: 12px;"> <div class="h3 fw-bold mb-0">{{ available_contexts|length }}</div> <small class="opacity-75">Available Contexts</small> </div> </div> </div> </div> </div> </div> </div> <!-- Context Switching Buttons --> {% if available_contexts|length > 1 %} <div class="row mb-4"> <div class="col-12"> <div class="card"> <div class="card-body"> <h5 class="card-title mb-3"> <i class="fas fa-exchange-alt text-primary"></i> Switch Role Context </h5> <p class="text-muted mb-3"> You have access to lecturers management through multiple roles. Choose which role context to use: </p> <div class="d-flex flex-wrap gap-3"> {% for context in available_contexts %} <a href="?context={{ context.role }}" class="btn {% if context.role == selected_context %}btn-primary{% else %}btn-outline-primary{% endif %} context-switch-btn"> <i class="fas fa-chalkboard-teacher me-2"></i> <span class="fw-bold">View as {{ context.role_display }}</span> {% if context.department %} <small class="d-block opacity-75">{{ context.department.name }}</small> {% elif context.faculty %} <small class="d-block opacity-75">{{ context.faculty.name }}</small> {% endif %} {% if context.is_delegated %} <span class="badge bg-warning text-dark ms-2">Delegated</span> {% endif %} </a> {% endfor %} </div> </div> </div> </div> </div> {% endif %} <!-- Current Context Display --> <div class="row mb-4"> <div class="col-12"> <div class="alert alert-info d-flex align-items-center"> <i class="fas fa-info-circle me-3"></i> <div> <strong>Current Context:</strong> {% for context in available_contexts %} {% if context.role == selected_context %} Viewing lecturers as <strong>{{ context.role_display }}</strong> {% if context.department %} for <strong>{{ context.department.name }}</strong> Department {% elif context.faculty %} for <strong>{{ context.faculty.name }}</strong> Faculty {% endif %} {% if context.is_delegated %} <span class="badge bg-warning text-dark ms-2">Delegated Access</span> {% endif %} {% endif %} {% endfor %} </div> </div> </div> </div> <!-- Lecturers Content (Actual Data) --> <div class="row"> <!-- Statistics Cards --> <div class="col-md-3 mb-4"> <div class="card text-center" style="background: var(--royal-blue-gradient); color: white;"> <div class="card-body"> <h3 class="fw-bold">{{ stats.total_lecturers|default:0 }}</h3> <p class="mb-0">Total Lecturers</p> </div> </div> </div> {% if current_context.role == 'FACULTY_DEAN' %} <div class="col-md-3 mb-4"> <div class="card text-center bg-success text-white"> <div class="card-body"> <h3 class="fw-bold">{{ stats.total_hods|default:0 }}</h3> <p class="mb-0">HODs</p> </div> </div> </div> <div class="col-md-3 mb-4"> <div class="card text-center bg-info text-white"> <div class="card-body"> <h3 class="fw-bold">{{ stats.departments_count|default:0 }}</h3> <p class="mb-0">Departments</p> </div> </div> </div> {% endif %} {% if current_context.role == 'HOD' %} <div class="col-md-6 mb-4"> <div class="card text-center bg-info text-white"> <div class="card-body"> <h5 class="fw-bold">{{ stats.department_name|default:"N/A" }}</h5> <p class="mb-0">Department</p> </div> </div> </div> {% endif %} </div> <!-- Lecturers List --> <div class="row"> <div class="col-12"> <div class="card"> <div class="card-header"> <h5 class="mb-0"> <i class="fas fa-chalkboard-teacher me-2"></i> Lecturers List {% if current_context %} <span class="badge bg-primary ms-2">{{ current_context.role_display }}{{ current_context.context_suffix }}</span> {% endif %} </h5> </div> <div class="card-body"> {% if lecturer_roles %} <div class="table-responsive"> <table class="table table-striped table-hover"> <thead class="table-dark"> <tr> <th>Name</th> <th>Email</th> <th>Department</th> <th>Status</th> <th>Actions</th> </tr> </thead> <tbody> {% for lecturer_role in lecturer_roles %} <tr> <td> <div class="d-flex align-items-center"> <div class="avatar-sm bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3"> {{ lecturer_role.user.first_name|first }}{{ lecturer_role.user.last_name|first }} </div> <div> <strong>{{ lecturer_role.user.get_full_name }}</strong> <br> <small class="text-muted">{{ lecturer_role.user.username }}</small> </div> </div> </td> <td>{{ lecturer_role.user.email }}</td> <td> {% if lecturer_role.department %} <span class="badge bg-secondary">{{ lecturer_role.department.name }}</span> {% else %} <span class="text-muted">No Department</span> {% endif %} </td> <td> {% if lecturer_role.user.is_active %} <span class="badge bg-success">Active</span> {% else %} <span class="badge bg-danger">Inactive</span> {% endif %} </td> <td> <div class="btn-group btn-group-sm"> <button class="btn btn-outline-primary" title="View Details"> <i class="fas fa-eye"></i> </button> <button class="btn btn-outline-secondary" title="View Courses"> <i class="fas fa-book"></i> </button> </div> </td> </tr> {% endfor %} </tbody> </table> </div> {% else %} <div class="text-center py-5"> <i class="fas fa-chalkboard-teacher fa-3x text-muted mb-3"></i> <h5 class="text-muted">No Lecturers Found</h5> <p class="text-muted"> {% if current_context.role == 'HOD' %} No lecturers are assigned to your department yet. {% else %} No lecturers are available in this faculty. {% endif %} </p> </div> {% endif %} </div> </div> </div> </div> </div> <style> /* Context Switch Button Styling */ .context-switch-btn { min-width: 200px; text-align: left; padding: 12px 16px; border-radius: 12px; } .context-switch-btn:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.15); } .context-switch-btn.btn-primary { background: var(--royal-blue-gradient); border: none; } .context-switch-btn small { font-size: 11px; margin-top: 2px; } /* Avatar styling */ .avatar-sm { width: 40px; height: 40px; font-size: 14px; font-weight: 600; } /* Table responsive styling */ .table-responsive { border-radius: 8px; overflow: hidden; } .table th { border-top: none; font-weight: 600; font-size: 14px; } .table td { vertical-align: middle; } /* Responsive design */ @media (max-width: 768px) { .context-switch-btn { min-width: 100%; text-align: center; } .table-responsive { font-size: 14px; } .avatar-sm { width: 35px; height: 35px; font-size: 12px; } } </style> <script> // Handle lecturers management functionality document.addEventListener('DOMContentLoaded', function() { console.log('Lecturers management loaded for context:', '{{ selected_context }}'); // Add any additional functionality here // For example: search, filtering, etc. }); </script> {% endblock %} 