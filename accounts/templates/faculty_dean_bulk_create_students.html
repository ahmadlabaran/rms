{% extends 'base.html' %}

{% block title %}Bulk Create Students{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Bulk Create Students</h5>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <strong>Format:</strong> first_name,last_name,matric_number,email,username,password<br>
                        <strong>Example:</strong> John,Doe,CSC/24/0001,john.doe@student.edu.ng,john.doe,password123
                    </div>

                    <form method="post">
                        {% csrf_token %}

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Department</label>
                                <select name="department_id" class="form-select" required>
                                    <option value="">Select Department</option>
                                    {% for dept in departments %}
                                    <option value="{{ dept.id }}">{{ dept.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Level</label>
                                <select name="level_id" class="form-select" required>
                                    <option value="">Select Level</option>
                                    {% for level in levels %}
                                    <option value="{{ level.id }}">{{ level.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Student Data</label>
                            <textarea name="students_data" class="form-control" rows="10"
                                      placeholder="Enter student data here, one per line" required></textarea>
                        </div>

                        <div class="d-flex gap-2">
                            <button type="button" class="btn btn-outline-secondary" onclick="generateSample()">Sample Data</button>
                            <button type="button" class="btn btn-outline-secondary" onclick="clearData()">Clear</button>
                            <a href="{% url 'faculty_dean_students' %}" class="btn btn-secondary">Back</a>
                            <button type="submit" class="btn btn-primary">Create Students</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function generateSample() {
    const sample = `John,Doe,CSC/24/0001,john.doe@student.edu.ng,john.doe,password123
Jane,Smith,CSC/24/0002,jane.smith@student.edu.ng,jane.smith,password456
Michael,Johnson,CSC/24/0003,michael.johnson@student.edu.ng,michael.johnson,password789`;
    document.querySelector('textarea[name="students_data"]').value = sample;
}

function clearData() {
    if (confirm('Clear all data?')) {
        document.querySelector('textarea[name="students_data"]').value = '';
    }
}
</script>

{% endblock %}
