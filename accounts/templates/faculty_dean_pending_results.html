{% extends 'base.html' %} {% block title %}Pending Results - {{ faculty.name }}{% endblock %} {% block content %} <style> .card { background: #FFFFFF; border: 1px solid var(--border-light); border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); } .btn { border-radius: 12px; font-weight: 600; border: none; font-size: 14px; } .btn-primary { background: var(--ios-blue); color: white; } .btn-secondary { background: var(--ios-gray-light); color: var(--text-primary); } .btn-success { background: var(--ios-green); color: white; } .btn-warning { background: var(--ios-orange); color: white; } .btn-danger { background: var(--ios-red); color: white; } </style> <div class="container-fluid"> <!-- Header --> <div class="row mb-4"> <div class="col-12"> <div class="card" style="background: var(--royal-blue-gradient); color: white;"> <div class="card-body"> <div class="row align-items-center"> <div class="col-md-8"> <h1 class="mb-1 fw-bold">Pending Results</h1> <p class="mb-0 opacity-75">{{ faculty.name }} Faculty - Review and approve results</p> </div> <div class="col-md-4 text-center"> <div style="background: rgba(255,255,255,0.2); padding: 12px 16px; border-radius: 12px;"> <div class="h3 fw-bold mb-0">{{ pending_results.count }}</div> <small class="opacity-75">Pending Results</small> </div> </div> </div> </div> </div> </div> </div> <!-- Filter and Actions --> <div class="row mb-4"> <div class="col-12"> <div class="card"> <div class="card-body"> <div class="row align-items-center"> <div class="col-md-6"> <h5 class="card-title fw-bold mb-0">Filter Results</h5> </div> <div class="col-md-6"> <div class="d-flex gap-2 justify-content-md-end"> <button class="btn btn-success btn-sm" onclick="approveSelected()"> <i class="bi bi-check-circle me-1"></i>Approve Selected </button> <button class="btn btn-danger btn-sm" onclick="rejectSelected()"> <i class="bi bi-x-circle me-1"></i>Reject Selected </button> </div> </div> </div> <div class="row mt-3"> <div class="col-md-3 mb-2"> <select class="form-select form-select-sm"> <option>All Departments</option> {% for department in departments %} <option value="{{ department.id }}">{{ department.name }}</option> {% endfor %} </select> </div> <div class="col-md-3 mb-2"> <select class="form-select form-select-sm"> <option>All Levels</option> <option value="100">100 Level</option> <option value="200">200 Level</option> <option value="300">300 Level</option> <option value="400">400 Level</option> </select> </div> <div class="col-md-3 mb-2"> <select class="form-select form-select-sm"> <option>All Sessions</option> {% for session in sessions %} <option value="{{ session.id }}">{{ session.name }}</option> {% endfor %} </select> </div> <div class="col-md-3 mb-2"> <input type="text" class="form-control form-control-sm" placeholder="Search matric number..."> </div> </div> </div> </div> </div> </div> <!-- Results List --> <div class="row"> <div class="col-12"> <div class="card"> <div class="card-body"> <div class="d-flex justify-content-between align-items-center mb-3"> <h5 class="card-title fw-bold mb-0">Results Awaiting Approval</h5> <div class="form-check"> <input class="form-check-input" type="checkbox" id="selectAll" onchange="toggleSelectAll()"> <label class="form-check-label" for="selectAll">Select All</label> </div> </div> {% if pending_results %} <div class="table-responsive"> <table class="table table-hover"> <thead class="table-light"> <tr> <th width="50"> <input type="checkbox" class="form-check-input" id="headerCheckbox"> </th> <th>Student</th> <th>Course</th> <th>Department</th> <th>Score</th> <th>Grade</th> <th>Submitted</th> <th>Actions</th> </tr> </thead> <tbody> {% for result in pending_results %} <tr> <td> <input type="checkbox" class="form-check-input result-checkbox" value="{{ result.id }}"> </td> <td> <div class="fw-bold">{{ result.enrollment.student.matric_number }}</div> <small class="text-muted">{{ result.enrollment.student.get_full_name }}</small> </td> <td> <div class="fw-bold">{{ result.enrollment.course.code }}</div> <small class="text-muted">{{ result.enrollment.course.title }}</small> </td> <td>{{ result.enrollment.student.department.name }}</td> <td> <span class="badge bg-primary">{{ result.total_score }}/100</span> </td> <td> <span class="badge bg-success">{{ result.grade }}</span> </td> <td> <small class="text-muted">{{ result.created_at|date:"M d, Y" }}</small> </td> <td> <div class="btn-group btn-group-sm"> <button class="btn btn-outline-primary btn-sm" onclick="viewResultDetails({{ result.id }})"> <i class="bi bi-eye"></i> </button> <button class="btn btn-success btn-sm" onclick="approveResult({{ result.id }}, '{{ result.enrollment.student.matric_number }}')"> <i class="bi bi-check"></i> </button> <button class="btn btn-danger btn-sm" onclick="rejectResult({{ result.id }}, '{{ result.enrollment.student.matric_number }}')"> <i class="bi bi-x"></i> </button> </div> </td> </tr> {% endfor %} </tbody> </table> </div> <!-- Pagination --> {% if pending_results.has_other_pages %} <nav aria-label="Results pagination" class="mt-3"> <ul class="pagination justify-content-center"> {% if pending_results.has_previous %} <li class="page-item"> <a class="page-link" href="?page={{ pending_results.previous_page_number }}">Previous</a> </li> {% endif %} {% for num in pending_results.paginator.page_range %} {% if pending_results.number == num %} <li class="page-item active"> <span class="page-link">{{ num }}</span> </li> {% else %} <li class="page-item"> <a class="page-link" href="?page={{ num }}">{{ num }}</a> </li> {% endif %} {% endfor %} {% if pending_results.has_next %} <li class="page-item"> <a class="page-link" href="?page={{ pending_results.next_page_number }}">Next</a> </li> {% endif %} </ul> </nav> {% endif %} {% else %} <div class="text-center py-5"> <i class="bi bi-check-circle" style="font-size: 3rem; color: #28a745;"></i> <h5 class="mt-3 text-muted">No Pending Results</h5> <p class="text-muted">All results have been reviewed and approved.</p> </div> {% endif %} </div> </div> </div> </div> </div> <script> function toggleSelectAll() { const selectAll = document.getElementById('selectAll'); const checkboxes = document.querySelectorAll('.result-checkbox'); checkboxes.forEach(checkbox => { checkbox.checked = selectAll.checked; }); } function approveSelected() { const selected = getSelectedResults(); if (selected.length === 0) { alert('Please select results to approve.'); return; } if (confirm(`Approve ${selected.length} selected results?`)) { alert('Results approved successfully!'); location.reload(); } } function rejectSelected() { const selected = getSelectedResults(); if (selected.length === 0) { alert('Please select results to reject.'); return; } if (confirm(`Reject ${selected.length} selected results?`)) { alert('Results rejected successfully!'); location.reload(); } } function getSelectedResults() { const selected = []; document.querySelectorAll('.result-checkbox:checked').forEach(checkbox => { selected.push(checkbox.value); }); return selected; } function approveResult(resultId, matricNumber) { if (confirm(`Approve result for ${matricNumber}?`)) { alert('Result approved successfully!'); location.reload(); } } function rejectResult(resultId, matricNumber) { if (confirm(`Reject result for ${matricNumber}?`)) { alert('Result rejected successfully!'); location.reload(); } } function viewResultDetails(resultId) { alert('Result details view - to be implemented'); } </script> {% endblock %} 