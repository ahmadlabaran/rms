{% extends 'base.html' %} {% block title %}Assign Lecturers - HOD{% endblock %} {% block content %} <style> :root { --ios-red: #FF3B30; --ios-blue: #007AFF; --ios-green: #34C759; --ios-orange: #FF9500; --text-primary: #1D1D1F; --text-secondary: #86868B; --text-tertiary: #C7C7CC; --surface-primary: #FFFFFF; --surface-secondary: #F2F2F7; --border-color: #D1D1D6; --border-light: #E5E5EA; --royal-blue-gradient: linear-gradient(135deg, #007AFF 0%, #1e40af 100%); } .ios-card { background: white; border-radius: 16px; padding: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); border: 1px solid var(--border-light); margin-bottom: 20px; } .btn { padding: 10px 16px; border-radius: 8px; font-weight: 600; text-align: center; border: none; cursor: pointer; font-size: 12px; text-decoration: none; display: inline-block; min-width: 100px; } .btn-primary { background: var(--royal-blue-gradient); color: white; } .btn-success { background: var(--ios-green); color: white; } .btn-warning { background: var(--ios-orange); color: white; } .btn-secondary { background: var(--surface-secondary); color: var(--text-primary); border: 1px solid var(--border-color); } .assignment-card { background: var(--surface-secondary); border-radius: 12px; padding: 16px; margin-bottom: 12px; border: 1px solid var(--border-light); } .assignment-card:hover { box-shadow: 0 4px 15px rgba(0,0,0,0.1); } .lecturer-card { background: white; border-radius: 12px; padding: 16px; margin-bottom: 12px; border: 1px solid var(--border-light); } .status-badge { padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 600; text-transform: uppercase; } .status-assigned { background: rgba(52, 199, 89, 0.2); color: var(--ios-green); } .status-unassigned { background: rgba(255, 149, 0, 0.2); color: var(--ios-orange); } /* Mobile Responsive */ @media (max-width: 768px) { .mobile-grid { grid-template-columns: 1fr !important; gap: 12px !important; } .btn { padding: 8px 12px !important; font-size: 11px !important; min-width: 80px !important; } h1 { font-size: 24px !important; } h2 { font-size: 18px !important; } } @media (max-width: 480px) { .btn { padding: 6px 10px !important; font-size: 10px !important; min-width: 70px !important; } h1 { font-size: 20px !important; } h2 { font-size: 16px !important; } .ios-card { padding: 12px !important; } } </style> <div style="max-width: 1400px; margin: 0 auto; padding: 16px;"> <!-- Header --> <div class="ios-card" style="background: var(--royal-blue-gradient); color: white;"> <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px;"> <div> <h1 style="margin: 0 0 6px 0; font-size: 28px; font-weight: 600;"> Assign Lecturers </h1> <p style="margin: 0; opacity: 0.9; font-size: 16px;"> {{ department.name }} Department • {{ current_session.name|default:"No Active Session" }} </p> </div> <div style="display: flex; gap: 12px;"> <a href="{% url 'hod_dashboard' %}" class="btn" style="background: rgba(255,255,255,0.2); color: white;"> ← Back to Dashboard </a> </div> </div> </div> <!-- Statistics --> <div class="mobile-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;"> <div class="ios-card" style="text-align: center; background: var(--ios-blue); color: white;"> <div style="font-size: 32px; font-weight: 700; margin-bottom: 6px;">{{ stats.total_courses }}</div> <div style="font-size: 14px; opacity: 0.9;">Total Courses</div> </div> <div class="ios-card" style="text-align: center; background: var(--ios-green); color: white;"> <div style="font-size: 32px; font-weight: 700; margin-bottom: 6px;">{{ stats.assigned_courses }}</div> <div style="font-size: 14px; opacity: 0.9;">Assigned</div> </div> <div class="ios-card" style="text-align: center; background: var(--ios-orange); color: white;"> <div style="font-size: 32px; font-weight: 700; margin-bottom: 6px;">{{ stats.unassigned_courses }}</div> <div style="font-size: 14px; opacity: 0.9;">Unassigned</div> </div> <div class="ios-card" style="text-align: center; background: var(--ios-red); color: white;"> <div style="font-size: 32px; font-weight: 700; margin-bottom: 6px;">{{ stats.total_lecturers }}</div> <div style="font-size: 14px; opacity: 0.9;">Available Lecturers</div> </div> </div> <!-- Action Tabs --> <div class="ios-card"> <div style="display: flex; gap: 12px; margin-bottom: 20px; border-bottom: 1px solid var(--border-light); padding-bottom: 16px;"> <button onclick="showTab('assign')" id="assignTab" class="btn btn-primary" style="border-radius: 20px;"> Assign Existing Lecturer </button> <button onclick="showTab('create')" id="createTab" class="btn btn-secondary" style="border-radius: 20px;"> Create New Lecturer </button> </div> <!-- Quick Assignment Tab --> <div id="assignTabContent"> <h2 style="color: var(--text-primary); margin-bottom: 16px; font-size: 20px; font-weight: 700;"> Quick Assignment </h2> <form id="quickAssignForm" style="display: grid; grid-template-columns: 1fr 1fr auto; gap: 12px; align-items: end;"> {% csrf_token %} <div> <label style="display: block; margin-bottom: 6px; font-weight: 600; color: var(--text-primary); font-size: 14px;">Course</label> <select name="course_id" class="form-input" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px;" required> <option value="">Select a course...</option> {% for course in courses %} {% if not course.assigned_lecturer %} <option value="{{ course.id }}">{{ course.code }} - {{ course.title }}</option> {% endif %} {% endfor %} </select> </div> <div> <label style="display: block; margin-bottom: 6px; font-weight: 600; color: var(--text-primary); font-size: 14px;">Lecturer</label> <select name="lecturer_id" class="form-input" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px;" required> <option value="">Select a lecturer...</option> {% for lecturer in lecturers %} <option value="{{ lecturer.id }}">{{ lecturer.user.get_full_name }} ({{ lecturer.department.name|default:"Faculty-wide" }})</option> {% endfor %} </select> </div> <button type="submit" class="btn btn-primary" style="padding: 10px 20px; font-size: 14px;"> Assign </button> </form> </div> <!-- Create Lecturer Tab --> <div id="createTabContent" style="display: none;"> <h2 style="color: var(--text-primary); margin-bottom: 16px; font-size: 20px; font-weight: 700;"> Create New Lecturer & Assign Courses </h2> <form method="post"> {% csrf_token %} <input type="hidden" name="action" value="create_lecturer"> <!-- Lecturer Information --> <div style="background: var(--surface-secondary); padding: 20px; border-radius: 12px; margin-bottom: 20px;"> <h3 style="color: var(--ios-blue); margin-bottom: 16px; font-size: 16px; font-weight: 600;">Lecturer Information</h3> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;"> <div> <label style="display: block; margin-bottom: 6px; font-weight: 600; color: var(--text-primary); font-size: 14px;">First Name *</label> <input type="text" name="first_name" class="form-input" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px;" placeholder="Enter first name" required> </div> <div> <label style="display: block; margin-bottom: 6px; font-weight: 600; color: var(--text-primary); font-size: 14px;">Last Name *</label> <input type="text" name="last_name" class="form-input" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px;" placeholder="Enter last name" required> </div> </div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;"> <div> <label style="display: block; margin-bottom: 6px; font-weight: 600; color: var(--text-primary); font-size: 14px;">Email Address *</label> <input type="email" name="email" class="form-input" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px;" placeholder="lecturer@university.edu" required> </div> <div> <label style="display: block; margin-bottom: 6px; font-weight: 600; color: var(--text-primary); font-size: 14px;">Username *</label> <input type="text" name="username" class="form-input" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px;" placeholder="Enter username" required> </div> </div> <div> <label style="display: block; margin-bottom: 6px; font-weight: 600; color: var(--text-primary); font-size: 14px;">Password *</label> <div style="position: relative;"> <input type="password" name="password" id="lecturerPassword" class="form-input" style="width: 100%; padding: 10px 50px 10px 10px; border: 1px solid var(--border-color); border-radius: 8px;" placeholder="Enter password" required minlength="8"> <button type="button" onclick="togglePassword('lecturerPassword')" style="position: absolute; right: 12px; top: 50%; background: none; border: none; color: var(--text-secondary); cursor: pointer; font-size: 12px;"> Show </button> </div> </div> </div> <!-- Course Assignment --> <div style="background: var(--surface-secondary); padding: 20px; border-radius: 12px; margin-bottom: 20px;"> <h3 style="color: var(--ios-green); margin-bottom: 16px; font-size: 16px; font-weight: 600;">Assign Courses (Optional)</h3> <div style="max-height: 200px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px; padding: 12px; background: white;"> {% for course in courses %} {% if not course.assigned_lecturer %} <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;"> <input type="checkbox" name="course_ids" value="{{ course.id }}" id="course_{{ course.id }}" > <label for="course_{{ course.id }}" style="font-size: 14px; color: var(--text-primary); cursor: pointer;"> {{ course.code }} - {{ course.title }} ({{ course.credit_units }} units) </label> </div> {% endif %} {% endfor %} {% if not courses or not courses|length %} <div style="text-align: center; color: var(--text-secondary); padding: 20px;"> No unassigned courses available </div> {% endif %} </div> </div> <div style="display: flex; gap: 12px; justify-content: flex-end;"> <button type="button" onclick="showTab('assign')" class="btn btn-secondary"> Cancel </button> <button type="submit" class="btn btn-primary"> Create Lecturer & Assign Courses </button> </div> </form> </div> </div> <!-- Current Assignments --> <div class="ios-card"> <h2 style="color: var(--text-primary); margin-bottom: 16px; font-size: 20px; font-weight: 700;"> Current Assignments ({{ assignments.count }}) </h2> {% if assignments %} {% for assignment in assignments %} <div class="assignment-card"> <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 8px;"> <div style="flex: 1;"> <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;"> {{ assignment.course.code }} - {{ assignment.course.title }} </div> <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 2px;"> {{ assignment.course.credit_units }} Credit Units • {{ assignment.course.level.name }} </div> <div style="color: var(--ios-blue); font-size: 12px; font-weight: 600;"> Assigned to: {{ assignment.lecturer.get_full_name }} </div> </div> <div style="display: flex; gap: 6px;"> <button class="btn btn-warning change-assignment-btn" data-assignment-id="{{ assignment.id }}" data-course-code="{{ assignment.course.code }}"> Change </button> <button class="btn btn-secondary remove-assignment-btn" data-assignment-id="{{ assignment.id }}" data-course-code="{{ assignment.course.code }}"> Remove </button> </div> </div> </div> {% endfor %} {% else %} <div style="text-align: center; padding: 40px; color: var(--text-secondary);"> <p>No course assignments yet.</p> </div> {% endif %} </div> <!-- Available Lecturers --> <div class="ios-card"> <h2 style="color: var(--text-primary); margin-bottom: 16px; font-size: 20px; font-weight: 700;"> Available Lecturers ({{ lecturers.count }}) </h2> {% for lecturer in lecturers %} <div class="lecturer-card"> <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 8px;"> <div> <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;"> {{ lecturer.user.get_full_name }} </div> <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 2px;"> {{ lecturer.user.email }} • {{ lecturer.department.name|default:"Faculty-wide" }} </div> {% if lecturer.assigned_courses %} <div style="color: var(--ios-green); font-size: 12px; font-weight: 600;"> Teaching: {% for course in lecturer.assigned_courses %}{{ course.code }}{% if not forloop.last %}, {% endif %}{% endfor %} </div> {% else %} <div style="color: var(--ios-orange); font-size: 12px; font-weight: 600;"> No courses assigned </div> {% endif %} </div> <div> {% if lecturer.assigned_courses %} <span class="status-badge status-assigned">{{ lecturer.assigned_courses|length }} Course{{ lecturer.assigned_courses|length|pluralize }}</span> {% else %} <span class="status-badge status-unassigned">Available</span> {% endif %} </div> </div> </div> {% endfor %} </div> </div> <script> // Tab switching function showTab(tabName) { const assignTab = document.getElementById('assignTab'); const createTab = document.getElementById('createTab'); const assignContent = document.getElementById('assignTabContent'); const createContent = document.getElementById('createTabContent'); if (tabName === 'assign') { assignTab.className = 'btn btn-primary'; createTab.className = 'btn btn-secondary'; assignContent.style.display = 'block'; createContent.style.display = 'none'; } else { assignTab.className = 'btn btn-secondary'; createTab.className = 'btn btn-primary'; assignContent.style.display = 'none'; createContent.style.display = 'block'; } } // Password toggle function togglePassword(fieldId) { const field = document.getElementById(fieldId); const button = field.parentElement.querySelector('button'); if (field.type === 'password') { field.type = 'text'; button.textContent = 'Hide'; } else { field.type = 'password'; button.textContent = 'Show'; } } // Handle quick assignment document.getElementById('quickAssignForm').addEventListener('submit', function(e) { e.preventDefault(); const formData = new FormData(this); const submitButton = this.querySelector('button[type="submit"]'); submitButton.disabled = true; submitButton.textContent = 'Assigning...'; // Simulate assignment => { alert('Course assigned successfully!'); location.reload(); }, 1000); }); function changeAssignment(assignmentId, courseCode) { if (confirm(`Change lecturer assignment for ${courseCode}?`)) { alert('Assignment changed successfully!'); location.reload(); } } function removeAssignment(assignmentId, courseCode) { if (confirm(`Remove lecturer assignment for ${courseCode}?`)) { alert('Assignment removed successfully!'); location.reload(); } } // Add event listeners for assignment action buttons document.addEventListener('DOMContentLoaded', function() { document.querySelectorAll('.change-assignment-btn').forEach(button => { button.addEventListener('click', function() { const assignmentId = this.getAttribute('data-assignment-id'); const courseCode = this.getAttribute('data-course-code'); changeAssignment(assignmentId, courseCode); }); }); document.querySelectorAll('.remove-assignment-btn').forEach(button => { button.addEventListener('click', function() { const assignmentId = this.getAttribute('data-assignment-id'); const courseCode = this.getAttribute('data-course-code'); removeAssignment(assignmentId, courseCode); }); }); }); </script> {% endblock %} 