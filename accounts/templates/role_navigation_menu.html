{% load role_tags %}

<!-- Enhanced Role-Based Navigation Menu with Royal Blue Theme -->
<div class="role-navigation-container">
    {% if user_roles %}
    <nav class="navbar navbar-expand-lg" style="background: var(--royal-blue-gradient); border-radius: 16px; margin-bottom: 24px; box-shadow: var(--shadow-medium);">
        <div class="container-fluid" style="padding: 16px 24px;">
            <div class="navbar-nav d-flex flex-wrap gap-3 w-100 justify-content-start">

                <!-- Student Dashboard -->
                {% if 'STUDENT' in user_roles %}
                <a href="{% url 'student_dashboard' %}"
                   class="btn btn-nav-role"
                   role="button"
                   aria-label="Access Student Dashboard">
                    <i class="fas fa-graduation-cap" aria-hidden="true"></i>
                    <span class="nav-text">Student Portal</span>
                    {% if user|has_delegated_role:'STUDENT' %}
                    <span class="badge badge-delegated">Delegated</span>
                    {% endif %}
                </a>
                {% endif %}

                <!-- Lecturer Dashboard -->
                {% if 'LECTURER' in user_roles %}
                <a href="{% url 'lecturer_dashboard' %}"
                   class="btn btn-nav-role"
                   role="button"
                   aria-label="Access Lecturer Dashboard">
                    <i class="fas fa-chalkboard-teacher" aria-hidden="true"></i>
                    <span class="nav-text">Lecturer Dashboard</span>
                    {% if user|has_delegated_role:'LECTURER' %}
                    <span class="badge badge-delegated">Delegated</span>
                    {% endif %}
                </a>
                {% endif %}

                <!-- Exam Officer Dashboard -->
                {% if 'EXAM_OFFICER' in user_roles %}
                <a href="{% url 'exam_officer_dashboard' %}"
                   class="btn btn-nav-role"
                   role="button"
                   aria-label="Access Exam Officer Dashboard">
                    <i class="fas fa-clipboard-list" aria-hidden="true"></i>
                    <span class="nav-text">Exam Officer</span>
                    {% if user|has_delegated_role:'EXAM_OFFICER' %}
                    <span class="badge badge-delegated">Delegated</span>
                    {% endif %}
                </a>
                {% endif %}

                <!-- HOD Dashboard -->
                {% if 'HOD' in user_roles %}
                <a href="{% url 'hod_dashboard' %}"
                   class="btn btn-nav-role"
                   role="button"
                   aria-label="Access HOD Dashboard">
                    <i class="fas fa-user-tie" aria-hidden="true"></i>
                    <span class="nav-text">HOD Dashboard</span>
                    {% if user|has_delegated_role:'HOD' %}
                    <span class="badge badge-delegated">Delegated</span>
                    {% endif %}
                </a>
                {% endif %}

                <!-- Faculty Dean Dashboard -->
                {% if 'FACULTY_DEAN' in user_roles %}
                <a href="{% url 'faculty_dean_dashboard' %}"
                   class="btn btn-nav-role"
                   role="button"
                   aria-label="Access Faculty Dean Dashboard">
                    <i class="fas fa-university" aria-hidden="true"></i>
                    <span class="nav-text">Faculty Dean</span>
                    {% if user|has_delegated_role:'FACULTY_DEAN' %}
                    <span class="badge badge-delegated">Delegated</span>
                    {% endif %}
                </a>
                {% endif %}

                <!-- DAAA Dashboard -->
                {% if 'DAAA' in user_roles %}
                <a href="{% url 'daaa_dashboard' %}"
                   class="btn btn-nav-role"
                   role="button"
                   aria-label="Access DAAA Dashboard">
                    <i class="fas fa-cogs" aria-hidden="true"></i>
                    <span class="nav-text">DAAA Dashboard</span>
                    {% if user|has_delegated_role:'DAAA' %}
                    <span class="badge badge-delegated">Delegated</span>
                    {% endif %}
                </a>
                {% endif %}

                <!-- Senate Dashboard -->
                {% if 'SENATE' in user_roles %}
                <a href="{% url 'senate_dashboard' %}"
                   class="btn btn-nav-role"
                   role="button"
                   aria-label="Access Senate Dashboard">
                    <i class="fas fa-gavel" aria-hidden="true"></i>
                    <span class="nav-text">Senate Dashboard</span>
                    {% if user|has_delegated_role:'SENATE' %}
                    <span class="badge badge-delegated">Delegated</span>
                    {% endif %}
                </a>
                {% endif %}

                <!-- Super Admin Dashboard -->
                {% if 'SUPER_ADMIN' in user_roles %}
                <a href="{% url 'super_admin_dashboard' %}"
                   class="btn btn-nav-role"
                   role="button"
                   aria-label="Access Super Admin Dashboard">
                    <i class="fas fa-crown" aria-hidden="true"></i>
                    <span class="nav-text">Super Admin</span>
                    {% if user|has_delegated_role:'SUPER_ADMIN' %}
                    <span class="badge badge-delegated">Delegated</span>
                    {% endif %}
                </a>
                {% endif %}

                <!-- Admission Officer Dashboard -->
                {% if 'ADMISSION_OFFICER' in user_roles %}
                <a href="{% url 'admission_officer_dashboard' %}"
                   class="btn btn-nav-role"
                   role="button"
                   aria-label="Access Admission Officer Dashboard">
                    <i class="fas fa-user-plus" aria-hidden="true"></i>
                    <span class="nav-text">Admission Officer</span>
                    {% if user|has_delegated_role:'ADMISSION_OFFICER' %}
                    <span class="badge badge-delegated">Delegated</span>
                    {% endif %}
                </a>
                {% endif %}
            </div>

            <!-- Role Summary Badge -->
            <div class="ms-auto">
                <span class="badge bg-light text-dark" style="font-size: 11px; padding: 6px 12px; border-radius: 8px;">
                    {{ user_roles|length }} Role{{ user_roles|length|pluralize }}
                </span>
            </div>
        </div>
    </nav>
    {% endif %}

</div>

<!-- Navigation Button Styles with Royal Blue Theme -->
<style>
/* Navigation Role Button Styling */
.btn-nav-role {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white !important;
    padding: 12px 20px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 14px;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    position: relative;
    overflow: hidden;
    min-height: 48px;
    /* I think this ensures good accessibility with proper touch targets */
}

.btn-nav-role:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.4);
    color: white !important;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.btn-nav-role:focus {
    outline: 2px solid rgba(255, 255, 255, 0.8);
    outline-offset: 2px;
    color: white !important;
}

.btn-nav-role:active {
    transform: translateY(0);
    background: rgba(255, 255, 255, 0.15);
}

/* Navigation Text Styling */
.nav-text {
    font-weight: 600;
    letter-spacing: -0.01em;
    /* Based on the documentation, this should improve readability */
}

/* Delegation Badge Styling */
.badge-delegated {
    background: rgba(255, 193, 7, 0.9) !important;
    color: #000 !important;
    font-size: 10px;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: 6px;
    margin-left: 8px;
    border: 1px solid rgba(255, 255, 255, 0.3);
}

/* Icon Styling */
.btn-nav-role i {
    font-size: 16px;
    opacity: 0.9;
    flex-shrink: 0;
}

/* Mobile Responsive Design */
@media (max-width: 991.98px) {
    .role-navigation-container .navbar-nav {
        flex-direction: column;
        gap: 12px;
        width: 100%;
    }

    .btn-nav-role {
        width: 100%;
        justify-content: flex-start;
        padding: 16px 20px;
        font-size: 16px;
    }

    .btn-nav-role i {
        font-size: 18px;
    }
}

@media (max-width: 576px) {
    .role-navigation-container {
        margin: 0 -15px;
    }

    .role-navigation-container .navbar {
        border-radius: 0;
        margin-bottom: 16px;
    }

    .btn-nav-role {
        border-radius: 8px;
        padding: 14px 16px;
    }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
    .btn-nav-role {
        border-width: 2px;
        border-color: white;
    }

    .btn-nav-role:hover {
        background: white;
        color: var(--royal-blue) !important;
    }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
    .btn-nav-role {
        transition: none;
    }

    .btn-nav-role:hover {
        transform: none;
    }
}
</style>
