{% extends 'base.html' %} {% block title %}Revoke Delegation - RMS{% endblock %} {% block content %} <style> :root { --royal-blue: #1e3a8a; --royal-blue-light: #3b82f6; --royal-blue-ultra-light: rgba(30, 58, 138, 0.1); --royal-blue-gradient: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); --ios-green: #3b82f6; /* Changed to blue variant */ --ios-orange: #1e40af; /* Changed to dark blue */ --ios-red: #dc2626; /* School brand red */ --text-primary: #1D1D1F; --text-secondary: #86868B; --surface-primary: #FFFFFF; --surface-secondary: #F2F2F7; --border-light: #E5E5EA; } .revoke-card { background: var(--surface-primary); border: 2px solid var(--ios-red); border-radius: 20px; padding: 32px; margin-bottom: 32px; box-shadow: 0 8px 30px rgba(255, 59, 48, 0.2); } .delegation-info { background: var(--surface-secondary); border-radius: 16px; padding: 24px; margin-bottom: 24px; } .info-row { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--border-light); } .info-row:last-child { border-bottom: none; } .info-label { font-size: 14px; font-weight: 600; color: var(--text-secondary); } .info-value { font-size: 16px; font-weight: 600; color: var(--text-primary); } .warning-box { background: rgba(255, 59, 48, 0.1); border: 1px solid var(--ios-red); border-radius: 12px; padding: 20px; margin-bottom: 24px; } .btn-danger { background: var(--ios-red); color: white; border: none; padding: 16px 32px; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; } .btn-danger:hover { box-shadow: 0 4px 12px rgba(255, 59, 48, 0.3); } .btn-secondary { background: var(--surface-secondary); color: var(--text-primary); border: none; padding: 16px 32px; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; text-decoration: none; display: inline-block; } .btn-secondary:hover { background: var(--border-light); } .form-control { width: 100%; padding: 16px 20px; border: 1px solid var(--border-light); border-radius: 12px; font-size: 16px; resize: vertical; } .form-control:focus { border-color: var(--ios-red); box-shadow: 0 0 0 4px rgba(255, 59, 48, 0.1); outline: none; } </style> <div style="max-width: 800px; margin: 0 auto; padding: 20px;"> <!-- Header --> <div style="text-align: center; margin-bottom: 32px;"> <h1 style="font-size: 32px; font-weight: 700; color: var(--ios-red); margin: 0 0 12px 0;"> Revoke Permission Delegation </h1> <p style="color: var(--text-secondary); font-size: 18px; margin: 0;"> Permanently revoke this temporary permission delegation </p> </div> <!-- Delegation Details --> <div class="revoke-card"> <h2 style="font-size: 24px; font-weight: 700; color: var(--text-primary); margin: 0 0 24px 0;"> Delegation Details </h2> <div class="delegation-info"> <div class="info-row"> <span class="info-label">Delegated Role</span> <span class="info-value">{{ delegation.get_delegated_role_display }}</span> </div> <div class="info-row"> <span class="info-label">Original Role Holder</span> <span class="info-value">{{ delegation.delegator.get_full_name }}</span> </div> <div class="info-row"> <span class="info-label">Delegate (Current Holder)</span> <span class="info-value" style="color: var(--royal-blue);">{{ delegation.delegate.get_full_name }}</span> </div> {% if delegation.faculty %} <div class="info-row"> <span class="info-label">Faculty</span> <span class="info-value">{{ delegation.faculty.name }}</span> </div> {% endif %} {% if delegation.department %} <div class="info-row"> <span class="info-label">Department</span> <span class="info-value">{{ delegation.department.name }}</span> </div> {% endif %} <div class="info-row"> <span class="info-label">Start Date</span> <span class="info-value">{{ delegation.start_date|date:"M d, Y H:i" }}</span> </div> <div class="info-row"> <span class="info-label">End Date</span> <span class="info-value">{{ delegation.end_date|date:"M d, Y H:i" }}</span> </div> <div class="info-row"> <span class="info-label">Status</span> <span class="info-value" style="color: var(--ios-green);">{{ delegation.status }}</span> </div> <div class="info-row"> <span class="info-label">Created By</span> <span class="info-value">{{ delegation.created_by.get_full_name }}</span> </div> <div class="info-row"> <span class="info-label">Created On</span> <span class="info-value">{{ delegation.created_at|date:"M d, Y H:i" }}</span> </div> </div> <!-- Original Reason --> <div style="margin-bottom: 24px;"> <h3 style="font-size: 18px; font-weight: 600; color: var(--text-primary); margin: 0 0 12px 0;"> Original Reason for Delegation </h3> <div style="background: var(--surface-secondary); padding: 16px; border-radius: 12px; font-size: 16px; color: var(--text-primary);"> {{ delegation.reason }} </div> </div> <!-- Warning --> <div class="warning-box"> <div style="font-size: 18px; font-weight: 700; color: var(--ios-red); margin-bottom: 12px;"> Warning: This action cannot be undone </div> <ul style="margin: 0; padding-left: 20px; color: var(--ios-red); font-size: 14px;"> <li>The delegate will immediately lose access to the delegated permissions</li> <li>Any ongoing work using these permissions may be interrupted</li> <li>The original role holder will retain their permissions</li> <li>This action will be logged and audited</li> <li>A new delegation will need to be created if permissions are needed again</li> </ul> </div> <!-- Revocation Form --> <form method="post"> {% csrf_token %} <div style="margin-bottom: 24px;"> <label style="display: block; margin-bottom: 12px; font-size: 16px; font-weight: 600; color: var(--text-primary);"> Reason for Revocation * </label> <textarea name="reason" required rows="4" class="form-control" placeholder="Please provide a detailed reason for revoking this delegation (e.g., Task completed, original user returned, emergency resolved, security concern, etc.)"></textarea> <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;"> This reason will be logged and may be visible to other administrators. </div> </div> <!-- Action Buttons --> <div style="display: flex; gap: 16px; justify-content: center;"> <a href="{% url 'super_admin_permission_delegations' %}" class="btn-secondary"> Cancel </a> <button type="submit" class="btn-danger" onclick="return confirmRevocation()"> Revoke Delegation </button> </div> </form> </div> <!-- Back Link --> <div style="text-align: center; margin-top: 32px;"> <a href="{% url 'super_admin_permission_delegations' %}" style="color: var(--royal-blue); text-decoration: none; font-weight: 600; font-size: 16px;"> ‚Üê Back to Permission Delegations </a> </div> </div> <script> function confirmRevocation() { const reason = document.querySelector('textarea[name="reason"]').value.trim(); if (!reason) { alert('Please provide a reason for revocation.'); return false; } const delegateName = '{{ delegation.delegate.get_full_name }}'; const roleName = '{{ delegation.get_delegated_role_display }}'; return confirm( `Are you sure you want to revoke the ${roleName} delegation for ${delegateName}?\n\n` + `This action cannot be undone and will immediately remove their access to these permissions.\n\n` + `Reason: ${reason}` ); } // Add touch feedback document.addEventListener('DOMContentLoaded', function() { const buttons = document.querySelectorAll('button, .btn-secondary'); buttons.forEach(button => { button.addEventListener('touchstart', function() { this.style.transform = 'scale(0.98)'; }); button.addEventListener('touchend', function() { this.style.transform = 'scale(1)'; }); }); }); </script> {% endblock %} 